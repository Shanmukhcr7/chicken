<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Chicken Order Page</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff5722;
            --primary-dark: #e64a19;
            --accent-color: #ffe0b2;
            --background-color: #fff6f0;
            --card-background: #fff;
            --border-color: #ffccbc;
            --text-color: #333;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--background-color);
            margin: 0;
            padding: 20px;
            color: var(--text-color);
            padding-bottom: 120px;
        }

        h1 {
            text-align: center;
            color: #d84315;
            margin-bottom: 30px;
        }

        .item {
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            background: var(--card-background);
            display: flex;
            gap: 16px;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .item img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
        }

        .details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .details h3 {
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .details .price {
            font-weight: normal;
            color: #555;
        }

        .cart-btn, .confirm-add {
            padding: 10px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s ease;
            text-align: center;
        }

        .cart-btn:hover, .confirm-add:hover {
            background: var(--primary-dark);
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
        }

        .quantity-controls button {
            background: #eee;
            border: 1px solid #ccc;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            flex-shrink: 0;
        }

        .quantity-controls button:hover {
            background: #ddd;
        }

        .quantity-controls .qty-input {
            width: 60px;
            padding: 8px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 5px;
            -moz-appearance: textfield;
        }

        .quantity-controls .qty-input::-webkit-outer-spin-button,
        .quantity-controls .qty-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quantity-controls .confirm-add {
            flex-grow: 1;
            padding: 8px 16px;
            background: var(--primary-color); /* Changed background color */
            color: white;
        }

        .footer-cart-summary {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--accent-color);
            padding: 10px 20px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .footer-cart-summary .cart-summary {
            background: none;
            padding: 0;
            margin-top: 0;
            font-weight: 600;
            color: var(--text-color);
        }
        .footer-cart-summary .cart-summary ul {
            list-style: none;
            padding: 0;
            margin: 5px 0;
        }
        .footer-cart-summary .cart-summary li {
            margin-bottom: 3px;
        }

        .footer-cart-summary button.order-btn {
            width: 100%;
            background: var(--primary-color);
            color: white;
            padding: 14px;
            border: none;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 10px;
            margin-top: 0;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .footer-cart-summary button.order-btn:hover {
            background: var(--primary-dark);
        }

        .quantity-controls.hidden {
            display: none;
        }
        .cart-btn.hidden {
            display: none;
        }
    </style>
</head>
<body>

    <h1>Order Fresh Chicken</h1>

    <div class="item" data-item="skin">
        <img src="skin.png" alt="Skin Chicken">
        <div class="details">
            <h3>Skin Chicken (‚Çπ<span class="price">220</span>/kg)</h3>
            <div class="quantity-controls hidden">
                <button class="qty-minus">-</button>
                <input type="number" class="qty-input" value="500" min="500" max="5000" step="100">
                <button class="qty-plus">+</button>
                <button class="confirm-add">Add</button>
            </div>
            <button class="cart-btn">Buy Now</button>
        </div>
    </div>

    <div class="item" data-item="skinless">
        <img src="skinless.png" alt="Skinless Chicken">
        <div class="details">
            <h3>Skinless Chicken (‚Çπ<span class="price">250</span>/kg)</h3>
            <div class="quantity-controls hidden">
                <button class="qty-minus">-</button>
                <input type="number" class="qty-input" value="500" min="500" max="5000" step="100">
                <button class="qty-plus">+</button>
                <button class="confirm-add">Add</button>
            </div>
            <button class="cart-btn">Buy Now</button>
        </div>
    </div>

    <div class="item" data-item="boneless">
        <img src="boneless.png" alt="Boneless Chicken">
        <div class="details">
            <h3>Boneless Chicken (‚Çπ<span class="price">440</span>/kg)</h3>
            <div class="quantity-controls hidden">
                <button class="qty-minus">-</button>
                <input type="number" class="qty-input" value="500" min="500" max="5000" step="100">
                <button class="qty-plus">+</button>
                <button class="confirm-add">Add</button>
            </div>
            <button class="cart-btn">Buy Now</button>
        </div>
    </div>

    <div class="footer-cart-summary">
        <div class="cart-summary" id="cartSummary">
            üõí No items added.
        </div>
        <button class="order-btn" onclick="submitOrder()">üìç Order now & Share My Location</button>
    </div>

    <script>
        const PRICES = {
            skin: 220,
            skinless: 250,
            boneless: 440
        };

        const cart = {};

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        function updateCartSummary() {
            const summaryBox = document.getElementById("cartSummary");

            if (Object.keys(cart).length === 0) {
                summaryBox.innerHTML = "üõí No items added.";
                return;
            }

            let summaryHTML = "<strong>üßæ Order Summary:</strong><br><ul>";
            let total = 0;

            for (const [item, qty] of Object.entries(cart)) {
                const pricePerKg = PRICES[item];
                const subtotal = (qty / 1000) * pricePerKg;
                total += subtotal;

                summaryHTML += `<li>${capitalize(item)} Chicken: ${qty}g ‚Äì ‚Çπ${Math.round(subtotal)}</li>`;
            }

            summaryHTML += `</ul>üöö Free Delivery<br><strong>Total: ‚Çπ${Math.round(total)}</strong>`;
            summaryBox.innerHTML = summaryHTML;
        }

        function addItemToCart(itemElement) {
            const item = itemElement.dataset.item;
            const qtyInput = itemElement.querySelector('.qty-input');
            const confirmBtn = itemElement.querySelector('.confirm-add');
            const initialBtn = itemElement.querySelector('.cart-btn');
            const quantityControls = itemElement.querySelector('.quantity-controls');

            const qty = parseInt(qtyInput.value, 10);

            if (isNaN(qty) || qty < 500 || qty > 5000) {
                alert("‚ùó Quantity must be between 500g and 5000g.");
                return;
            }

            cart[item] = qty;

            initialBtn.textContent = `Added: ${qty}g`;
            quantityControls.classList.add('hidden');
            initialBtn.classList.remove('hidden');

            alert("‚úÖ Item added to cart.");
            updateCartSummary();
        }

        document.querySelectorAll('.item').forEach(itemElement => {
            const item = itemElement.dataset.item;
            const initialBtn = itemElement.querySelector('.cart-btn');
            const quantityControls = itemElement.querySelector('.quantity-controls');
            const qtyInput = itemElement.querySelector('.qty-input');
            const qtyMinusBtn = itemElement.querySelector('.qty-minus');
            const qtyPlusBtn = itemElement.querySelector('.qty-plus');
            const confirmAddBtn = itemElement.querySelector('.confirm-add');

            initialBtn.addEventListener('click', () => {
                initialBtn.classList.add('hidden');
                quantityControls.classList.remove('hidden');
                if (cart[item]) {
                    qtyInput.value = cart[item];
                    confirmAddBtn.textContent = 'Update';
                } else {
                    qtyInput.value = 500;
                    confirmAddBtn.textContent = 'Add';
                }
            });

            qtyMinusBtn.addEventListener('click', () => {
                let currentValue = parseInt(qtyInput.value, 10);
                if (currentValue > parseInt(qtyInput.min, 10)) {
                    qtyInput.value = currentValue - parseInt(qtyInput.step, 10);
                }
            });

            qtyPlusBtn.addEventListener('click', () => {
                let currentValue = parseInt(qtyInput.value, 10);
                if (currentValue < parseInt(qtyInput.max, 10)) {
                    qtyInput.value = currentValue + parseInt(qtyInput.step, 10);
                }
            });

            confirmAddBtn.addEventListener('click', () => {
                addItemToCart(itemElement);
            });

            qtyInput.addEventListener('change', () => {
                let currentValue = parseInt(qtyInput.value, 10);
                const min = parseInt(qtyInput.min, 10);
                const max = parseInt(qtyInput.max, 10);

                if (isNaN(currentValue) || currentValue < min) {
                    qtyInput.value = min;
                } else if (currentValue > max) {
                    qtyInput.value = max;
                }
            });

            if (cart[item]) {
                initialBtn.textContent = `Added: ${cart[item]}g`;
            }
        });

        function submitOrder() {
            if (Object.keys(cart).length === 0) {
                alert("‚ùó Please add at least one item to cart.");
                return;
            }

            let message = "Hello, I'd like to order:\n\n";
            let total = 0;

            for (const [item, qty] of Object.entries(cart)) {
                const pricePerKg = PRICES[item];
                const subtotal = (qty / 1000) * pricePerKg;
                total += subtotal;
                message += `- ${capitalize(item)} Chicken: ${qty}g (‚Çπ${Math.round(subtotal)})\n`;
            }

            message += `\nDelivery: Free`;
            message += `\nTotal: ‚Çπ${Math.round(total)}`;

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(pos => {
                    const { latitude, longitude } = pos.coords;
                    const locationLink = `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}`;
                    message += `\n\nüìç My Location: ${locationLink}`;
                    const waUrl = `https://wa.me/917801035193?text=${encodeURIComponent(message)}`;
                    window.open(waUrl, '_blank');
                }, (error) => {
                    console.error("Geolocation error:", error);
                    alert("‚ö†Ô∏è Could not get your location. Please ensure location access is allowed.");
                    const waUrl = `https://wa.me/917801035193?text=${encodeURIComponent(message + "\n\nüìç Location permission denied.")}`;
                    window.open(waUrl, '_blank');
                });
            } else {
                alert("‚ùå Geolocation not supported by your browser.");
                const waUrl = `https://wa.me/917801035193?text=${encodeURIComponent(message + "\n\nüìç Geolocation not supported.")}`;
                window.open(waUrl, '_blank');
            }
        }

        updateCartSummary();

    </script>
</body>
</html>
